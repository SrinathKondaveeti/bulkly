import{a as Q}from"./chunk-3WD7YAAK.js";import{l as G}from"./chunk-6RRU44RT.js";import{A as H,E as R,G as v,J as w,Jb as l,Ma as p,N as f,V as P,X as I,a as r,b as d,ca as B,e as O,ea as _,f as L,fa as g,h as W,j as U,n as Y,p as D,w as q,x as z}from"./chunk-UONODV74.js";function k(e,t,n){let o=typeof e=="function"?{next:e,error:t,complete:n}:e;return s=>s.pipe(v({next:o.next,complete:o.complete}),z(i=>(o.error(i),U)),o.finalize?H(o.finalize):i=>i)}var $=Symbol("DEEP_SIGNAL");function V(e){return new Proxy(e,{has(t,n){return!!this.get(t,n,void 0)},get(t,n){let o=g(t);return!ct(o)||!(n in o)?(p(t[n])&&t[n][$]&&delete t[n],t[n]):(p(t[n])||(Object.defineProperty(t,n,{value:l(()=>t()[n]),configurable:!0}),t[n][$]=!0),V(t[n]))}})}var it=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function ct(e){if(e===null||typeof e!="object"||ut(e))return!1;let t=Object.getPrototypeOf(e);if(t===Object.prototype)return!0;for(;t&&t!==Object.prototype;){if(it.includes(t.constructor))return!1;t=Object.getPrototypeOf(t)}return t===Object.prototype}function ut(e){return typeof e?.[Symbol.iterator]=="function"}var at=new WeakMap,a=Symbol("STATE_SOURCE");function b(e,...t){let n=g(()=>J(e)),o=t.reduce((c,u)=>r(r({},c),typeof u=="function"?u(c):u),n),s=e[a],i=Reflect.ownKeys(e[a]);for(let c of Reflect.ownKeys(o))if(i.includes(c)){let u=c;n[u]!==o[u]&&s[u].set(o[u])}ft(e)}function J(e){let t=e[a];return Reflect.ownKeys(e[a]).reduce((n,o)=>{let s=t[o]();return d(r({},n),{[o]:s})},{})}function dt(e){return at.get(e[a])||[]}function ft(e){let t=dt(e);for(let n of t){let o=g(()=>J(e));n(o)}}function N(...e){let t=[...e],n=typeof t[0]=="function"?{}:t.shift(),o=t;return(()=>{class i{constructor(){let u=o.reduce((j,rt)=>rt(j),lt()),{stateSignals:y,props:h,methods:S,hooks:m}=u,x=r(r(r({},y),h),S);this[a]=u[a];for(let j of Reflect.ownKeys(x))this[j]=x[j];let{onInit:T,onDestroy:F}=m;T&&T(),F&&f(I).onDestroy(F)}static \u0275fac=function(y){return new(y||i)};static \u0275prov=w({token:i,factory:i.\u0275fac,providedIn:n.providedIn||null})}return i})()}function lt(){return{[a]:{},stateSignals:{},props:{},methods:{},hooks:{}}}function E(e){return t=>{let n=e(r(r(r({[a]:t[a]},t.stateSignals),t.props),t.methods));return d(r({},t),{props:r(r({},t.props),n)})}}function X(e){return E(t=>{let n=e(t);return Reflect.ownKeys(n).reduce((s,i)=>{let c=n[i];return d(r({},s),{[i]:p(c)?c:l(c)})},{})})}function Z(e){return t=>{let n=e(r(r(r({[a]:t[a]},t.stateSignals),t.props),t.methods));return d(r({},t),{methods:r(r({},t.methods),n)})}}function tt(e){return t=>{let n=typeof e=="function"?e():e,o=Reflect.ownKeys(n),s=t[a],i={};for(let c of o)s[c]=B(n[c]),i[c]=V(s[c]);return d(r({},t),{stateSignals:r(r({},t.stateSignals),i)})}}function A(e,t){let n=t?.injector??f(P),o=new W,s=e(o).subscribe();n.get(I).onDestroy(()=>s.unsubscribe());let i=(c,u)=>{if(pt(c))return o.next(c),{destroy:O};let y=mt(),h=u?.injector??y??n;if(p(c)){let m=_(()=>{let x=c();g(()=>o.next(x))},{injector:h});return s.add({unsubscribe:()=>m.destroy()}),m}let S=c.subscribe(m=>o.next(m));return s.add(S),h!==n&&h.get(I).onDestroy(()=>S.unsubscribe()),{destroy:()=>S.unsubscribe()}};return i.destroy=s.unsubscribe.bind(s),i}function pt(e){return!p(e)&&!Y(e)}function mt(){try{return f(P)}catch{return}}var M=class e{#t=f(G);fetchLiveProducrs(){return this.#t.get(Q.allProductsUrl)}static \u0275fac=function(n){return new(n||e)};static \u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"})};var gt=Math.pow(10,8)*24*60*60*1e3,Ut=-gt;var Yt=864e5;var yt=3600;var et=yt*24,qt=et*7,ht=et*365.2425,St=ht/12,zt=St*3,K=Symbol.for("constructDateFrom");function nt(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&K in e?e[K](t):e instanceof Date?new e.constructor(t):new Date(t)}function C(e,t){return nt(t||e,e)}function ot(e,t){return+C(e)>+C(t)}var ie=N(tt({_liveProductsList:[],_comingSoonProductsList:[],_productsListApiLoading:!1,_productsListError:null}),E(()=>({_productsService:f(M)})),Z(e=>({fetchAllLiveProducts:A(L(q(()=>e._liveProductsList().length<1),v(()=>b(e,t=>d(r({},t),{_productsListApiLoading:!0}))),R(()=>e._productsService.fetchLiveProducrs().pipe(D(t=>{let n=[],o=[];return t.forEach(s=>ot(s.productLiveTime,new Date)?o.push(s):n.push(s)),{liveProductsList:n,comingSoonProductsList:o}}),k({next:t=>b(e,n=>d(r({},n),{_liveProductsList:t.liveProductsList,_comingSoonProductsList:t.comingSoonProductsList,_productsListError:null})),error:t=>b(e,n=>d(r({},n),{_productsListError:t,_comingSoonProductsList:[],_liveProductsList:[]})),finalize:()=>b(e,t=>d(r({},t),{_productsListApiLoading:!1}))}))))),fetchProductById:A(L(R(t=>(console.log(t),e._productsService.fetchLiveProducrs().pipe(k({next:n=>{console.log(n)},error:n=>{console.log(n)}}))))))})),X(e=>({liveProductsListC:l(()=>e._liveProductsList()),comingSoonProductsListC:l(()=>e._comingSoonProductsList()),productsListErrorC:l(()=>e._productsListError()),productsListApiLoading:l(()=>e._productsListApiLoading())})));export{Yt as a,nt as b,C as c,ie as d};
