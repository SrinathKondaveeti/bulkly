import{a as se}from"./chunk-CUQ5A7QX.js";import{a as y}from"./chunk-4SYPNSXY.js";import{a as te,b as ie,c as ne,d as oe,g as re,i as ae,j as le,k as h}from"./chunk-S5MLY5OZ.js";import{a as L}from"./chunk-3WD7YAAK.js";import{d as ee}from"./chunk-AXQW6MGF.js";import{l as Z}from"./chunk-6RRU44RT.js";import{$a as v,Ab as U,Bb as S,Ha as M,J as Q,N as F,Ob as Y,Pb as N,S as x,T as _,Ua as w,Va as k,Xa as p,Ya as u,Za as B,a as q,ab as b,b as j,bb as H,ca as R,cb as o,db as a,eb as E,fb as g,gb as f,ib as I,jb as K,mb as D,nb as W,ob as c,qb as z,rb as G,sb as J,ta as r,ub as X,vb as n,wb as C,zb as V}from"./chunk-UONODV74.js";var ue=["otpInput"];function fe(i,t){if(i&1){let e=I();g(0,"input",10,0),W("input",function(m){let s=x(e).$index,d=c();return _(d.onOtpInput(m,s))})("keydown",function(m){let s=x(e).$index,d=c();return _(d.onOtpKeyDown(m,s))})("paste",function(m){let s=x(e).$index,d=c();return _(d.onOtpPaste(m,s))}),f()}if(i&2){let e=t.$implicit;K("value",e)}}function ge(i,t){i&1&&(g(0,"div",9)(1,"span",11),n(2,"\u2705"),f(),g(3,"p",3),n(4," OTP entered. Please complete the form and click "),g(5,"span",5),n(6,'"Create Account"'),f(),n(7," to verify. "),f()())}var O=class i{isValid=N.required();email=N.required();otpEmitter=Y();otpControls=Array.from({length:6},()=>"");otpInputs;ngAfterViewInit(){this.focusIndex(0)}focusIndex(t){let e=this.otpInputs?.get(t)?.nativeElement;e&&(e.focus(),e.select())}onOtpInput(t,e){let l=t.target,m=(l.value||"").replace(/\D/g,"").slice(0,1);this.otpControls[e]=m,l.value=m,m&&e<5&&this.focusIndex(e+1),this.otpEmitter.emit(this.otpControls)}onOtpKeyDown(t,e){let l=t.key;if(l==="Backspace"){if(this.otpControls[e]){this.otpControls[e]="";return}e>0&&(this.otpControls[e-1]="",this.focusIndex(e-1),t.preventDefault())}l==="ArrowLeft"&&e>0&&(this.focusIndex(e-1),t.preventDefault()),l==="ArrowRight"&&e<5&&(this.focusIndex(e+1),t.preventDefault()),this.otpEmitter.emit(this.otpControls)}onOtpPaste(t,e){let m=(t.clipboardData?.getData("text")??"").replace(/\D/g,"").slice(0,6);if(m){t.preventDefault();for(let s=0;s<6;s++){let d=e+s;if(d>5)break;this.otpControls[d]=m[s]??""}queueMicrotask(()=>{this.otpInputs.forEach((d,T)=>{d.nativeElement.value=this.otpControls[T]||""});let s=this.otpControls.findIndex(d=>!d);this.focusIndex(s===-1?5:s)}),this.otpEmitter.emit(this.otpControls)}}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["bulkly-otp"]],viewQuery:function(e,l){if(e&1&&z(ue,5),e&2){let m;G(m=J())&&(l.otpInputs=m)}},inputs:{isValid:[1,"isValid"],email:[1,"email"]},outputs:{otpEmitter:"otpEmitter"},decls:17,vars:2,consts:[["otpInput",""],[1,"rounded-2xl","border","border-sky-200","bg-sky-50/70","p-5"],[1,"flex","items-start","gap-2","text-slate-800","text-center"],[1,"text-sm"],[1,"text-lg"],[1,"font-semibold"],[1,"mt-4","text-sm","font-semibold","text-slate-800"],[1,"mt-3","flex","flex-wrap","gap-3"],["inputmode","numeric","autocomplete","one-time-code","maxlength","1",1,"h-12","w-12","rounded-xl","border","border-slate-200","bg-white/60","text-center","text-lg","font-semibold","text-slate-900","outline-none","transition","focus:border-sky-500","focus:bg-white","focus:ring-2","focus:ring-sky-200",3,"value"],[1,"mt-4","flex","items-start","gap-2","text-green-700"],["inputmode","numeric","autocomplete","one-time-code","maxlength","1",1,"h-12","w-12","rounded-xl","border","border-slate-200","bg-white/60","text-center","text-lg","font-semibold","text-slate-900","outline-none","transition","focus:border-sky-500","focus:bg-white","focus:ring-2","focus:ring-sky-200",3,"input","keydown","paste","value"],[1,"mt-0.5"]],template:function(e,l){e&1&&(g(0,"div",1)(1,"div",2)(2,"p",3)(3,"span",4),n(4,"\u2709\uFE0F"),f(),n(5," A "),g(6,"span",5),n(7,"6-digit OTP"),f(),n(8," has been sent to "),g(9,"span",5),n(10),f()()(),g(11,"p",6),n(12,"Enter OTP"),f(),g(13,"div",7),v(14,fe,2,1,"input",8,B),f(),p(16,ge,8,0,"div",9),f()),e&2&&(r(10),C(l.email()),r(4),b(l.otpControls),r(2),u(l.isValid()?16:-1))},encapsulation:2,changeDetection:0})};var P=class i{#e=F(Z);verifyEmail(t){return this.#e.post(L.sendEmailVerificationCodeUrl,{emailId:t})}register(t){return this.#e.post(L.registerUrl,t)}static \u0275fac=function(e){return new(e||i)};static \u0275prov=Q({token:i,factory:i.\u0275fac,providedIn:"root"})};var de=ne(i=>{h(i,{message:y.requiredMessage}),le(i,/^[^\s@]+@[^\s@]+\.[^\s@]+$/,{message:"Enter email pattern"}),oe(i,{request:t=>({url:L.emailAvailableUrl,method:"POST",body:{emailId:t.value()}}),onSuccess:t=>t?{kind:"email_available",message:"This email already exists."}:null,onError:(t,e)=>({kind:"email_API_failed",message:"Failed to test"})})});var A=(i,t)=>t.kind;function xe(i,t){if(i&1&&(o(0,"p",25),n(1),a()),i&2){let e=t.$implicit;r(),C(e.message)}}function _e(i,t){if(i&1&&v(0,xe,2,1,"p",25,A),i&2){c();let e=S(18);b(e().errors())}}function ve(i,t){if(i&1){let e=I();o(0,"button",26),D("click",function(){x(e);let m=c();return _(m.verifyEmail())}),n(1," Verify "),a()}if(i&2){c();let e=S(24);X(`absolute right-2 top-1/2 -translate-y-1/2
                                                        rounded-lg px-4 py-1.5
                                                        text-sm font-semibold text-slate-900
                                                        shadow-sm ring-1 ring-slate-200
                                                        hover:bg-slate-50 active:scale-95 transition ${e().valid()?"bg-green-300":"bg-white"} `)}}function be(i,t){i&1&&(o(0,"p",16),n(1,"Checking..."),a())}function Ce(i,t){if(i&1&&(o(0,"p",27),n(1),a()),i&2){let e=t.$implicit;r(),C(e.message)}}function he(i,t){if(i&1&&v(0,Ce,2,1,"p",27,A),i&2){c();let e=S(24);b(e().errors())}}function ye(i,t){i&1&&(o(0,"p",16)(1,"span",28),n(2," \u2713 "),a(),n(3," Email is valid "),a())}function Ee(i,t){if(i&1){let e=I();o(0,"div")(1,"bulkly-otp",29),D("otpEmitter",function(m){x(e);let s=c();return _(s.otpEmitter(m))}),a()()}if(i&2){let e=c(),l=e.signUpForm.emailVerificationCode;r(),H("email",e.signUpForm.email().value())("isValid",l().valid())}}function Se(i,t){if(i&1&&(o(0,"p",25),n(1),a()),i&2){let e=t.$implicit;r(),C(e.message)}}function we(i,t){if(i&1&&v(0,Se,2,1,"p",25,A),i&2){c();let e=S(35);b(e().errors())}}function ke(i,t){if(i&1&&(o(0,"p",25),n(1),a()),i&2){let e=t.$implicit;r(),C(e.message)}}function Ie(i,t){if(i&1&&v(0,ke,2,1,"p",25,A),i&2){c();let e=S(41);b(e().errors())}}function Ve(i,t){if(i&1&&(o(0,"p",25),n(1),a()),i&2){let e=t.$implicit;r(),C(e.message)}}function Ue(i,t){if(i&1&&v(0,Ve,2,1,"p",25,A),i&2){c();let e=S(47);b(e().errors())}}var ce=class i{#e=F(P);#t=F(ee);signup=R({name:"",email:"",mobileNumber:"",password:"",confirmPassword:"",emailVerificationCode:""});signUpForm=te(this.signup,t=>{h(t.name,{message:y.requiredMessage}),h(t.mobileNumber,{message:y.requiredMessage}),h(t.password,{message:y.requiredMessage}),h(t.confirmPassword,{message:y.requiredMessage}),h(t.emailVerificationCode,{message:y.requiredMessage}),ae(t.emailVerificationCode,6,{message:"6 digits"}),ie(t.email,de)});createAccount(t){console.log(history.state),history.go(-1),t.preventDefault()}verifyEmail(){console.log(this.signUpForm().value().email),this.signUpForm.email().valid()&&this.#e.verifyEmail(this.signUpForm().value().email).subscribe({next:t=>{console.log(t)},error:t=>{console.log(t)}})}otpEmitter(t){this.signup.update(e=>j(q({},e),{emailVerificationCode:t.join("")}))}navigateTo(t){this.#t.navigate([t])}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=M({type:i,selectors:[["bulkly-sign-up"]],decls:63,vars:24,consts:[[1,"min-h-screen","bg-gradient-to-b","from-sky-50","via-sky-50","to-white","px-4","py-10"],[1,"mx-auto","w-full","max-w-md"],[3,"submit"],[1,"flex","flex-col","items-center","text-center"],[1,"mt-3","text-2xl","font-semibold","tracking-tight","text-slate-900"],[1,"mt-6","text-lg","font-medium","text-slate-900"],[1,"mt-1","text-sm","text-slate-500"],[1,"mt-8","rounded-3xl","border","border-slate-200","bg-white","p-6","shadow-sm"],[1,"text-lg","font-semibold","text-slate-900"],[1,"mt-6","space-y-4"],[1,"block","text-sm","font-semibold","text-slate-900"],["type","text","placeholder","Enter your full name",1,"mt-2","w-full","rounded-xl","border","border-slate-200","bg-slate-50","px-4","py-3","text-sm","text-slate-900","outline-none","placeholder:text-slate-400","focus:border-sky-500","focus:bg-white","focus:ring-1","focus:ring-sky-500",3,"field"],[1,"space-y-1"],[1,"relative","mt-2"],["type","email","placeholder","your.email@example.com",1,"w-full","rounded-xl","border","border-slate-200","bg-slate-50","px-4","py-3","pr-24","text-sm","text-slate-900","outline-none","placeholder:text-slate-400","focus:border-sky-500","focus:bg-white","focus:ring-1","focus:ring-sky-500",3,"field"],["type","button",3,"class"],[1,"flex","items-center","gap-1","text-xs","text-green-600"],["type","tel","placeholder","+91 98765 43210",1,"mt-2","w-full","rounded-xl","border","border-slate-200","bg-slate-50","px-4","py-3","text-sm","text-slate-900","outline-none","placeholder:text-slate-400","focus:border-sky-500","focus:bg-white","focus:ring-1","focus:ring-sky-500",3,"field"],["type","password","placeholder","Create a strong password",1,"mt-2","w-full","rounded-xl","border","border-slate-200","bg-slate-50","px-4","py-3","text-sm","text-slate-900","outline-none","placeholder:text-slate-400","focus:border-sky-500","focus:bg-white","focus:ring-1","focus:ring-sky-500",3,"field"],["type","password","placeholder","Re-enter your password",1,"mt-2","w-full","rounded-xl","border","border-slate-200","bg-slate-50","px-4","py-3","text-sm","text-slate-900","outline-none","placeholder:text-slate-400","focus:border-sky-500","focus:bg-white","focus:ring-1","focus:ring-sky-500",3,"field"],["type","submit",1,"flex","w-full","items-center","justify-center","rounded-xl","bg-slate-900","px-4","py-2.5","text-sm","font-semibold","text-white","shadow-sm","hover:bg-black"],[1,"mt-6","text-center","text-sm","text-slate-600"],[1,"font-semibold","text-sky-600","hover:text-sky-700",3,"click"],[1,"mt-3","text-sm","text-slate-600"],["routerLink","/vendor-signin",1,"font-semibold","text-sky-600","hover:text-sky-700"],[1,"mt-1","text-xs","text-red-600"],["type","button",3,"click"],[1,"text-xs","text-red-600"],[1,"inline-flex","h-4","w-4","items-center","justify-center","rounded-full","border","border-green-600"],[3,"otpEmitter","email","isValid"]],template:function(e,l){if(e&1){let m=I();o(0,"section",0)(1,"div",1)(2,"form",2),D("submit",function(d){return x(m),_(l.createAccount(d))}),o(3,"div",3),E(4,"bulkly-icon"),o(5,"div",4),n(6,"Bulkly"),a(),o(7,"div",5),n(8,"Welcome Back"),a(),o(9,"div",6),n(10,"Create a new account"),a()(),o(11,"div",7)(12,"div",8),n(13,"Customer Sign Up"),a(),o(14,"div",6),n(15,"Create an account to start shopping"),a(),o(16,"div",9)(17,"div"),V(18),o(19,"label",10),n(20,"Full Name *"),a(),E(21,"input",11),w(),p(22,_e,2,0),a(),o(23,"div",12),V(24),o(25,"label",10),n(26," Email Address * "),a(),o(27,"div",13),E(28,"input",14),w(),p(29,ve,2,2,"button",15),a(),p(30,be,2,0,"p",16),p(31,he,2,0),p(32,ye,4,0,"p",16),a(),p(33,Ee,2,2,"div"),o(34,"div"),V(35),o(36,"label",10),n(37,"Mobile Number *"),a(),E(38,"input",17),w(),p(39,we,2,0),a(),o(40,"div"),V(41),o(42,"label",10),n(43,"Create Password *"),a(),E(44,"input",18),w(),p(45,Ie,2,0),a(),o(46,"div"),V(47),o(48,"label",10),n(49,"Confirm Password *"),a(),E(50,"input",19),w(),p(51,Ue,2,0),a(),o(52,"button",20),n(53," Create Account "),a()()(),o(54,"div",21)(55,"div"),n(56," Already have an account? "),o(57,"a",22),D("click",function(){return x(m),_(l.navigateTo("login/customer-login"))}),n(58,"Sign in"),a()(),o(59,"div",23),n(60," Are you a vendor? "),o(61,"a",24),n(62,"Sign in here"),a()()()()()()}if(e&2){r(18);let m=U(l.signUpForm.name);r(3),k(m),r(),u(m().invalid()&&m().touched()?22:-1),r(2);let s=U(l.signUpForm.email);r(4),k(s),r(),u(s().valid()&&!s().pending()&&s().touched()?29:-1),r(),u(s().pending()?30:-1),r(),u(s().invalid()&&s().touched()?31:-1),r(),u(s().valid()&&s().touched()?32:-1),r(),u(l.signUpForm.email().valid()?33:-1),r(2);let d=U(l.signUpForm.mobileNumber);r(3),k(d),r(),u(d().invalid()&&d().touched()?39:-1),r(2);let T=U(l.signUpForm.password);r(3),k(T),r(),u(T().invalid()&&T().touched()?45:-1),r(2);let $=U(l.signUpForm.confirmPassword);r(3),k($),r(),u($().invalid()&&$().touched()?51:-1)}},dependencies:[re,O,se],encapsulation:2,changeDetection:0})};export{ce as SignUp};
