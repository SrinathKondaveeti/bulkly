import{d as St}from"./chunk-233IUGOX.js";import{k as vt}from"./chunk-SNHJARLP.js";import{$a as mt,A as lt,Cb as h,E as B,G as R,Gb as bt,Ha as w,J as A,Ma as b,N as u,U as ut,V as O,X as M,Xa as j,Ya as L,_a as ft,a as i,ab as gt,b as g,bb as _,ca as pt,cb as I,db as V,e as rt,ea as G,eb as a,f as $,fa as S,fb as l,gb as y,h as it,j as st,jb as xt,kb as P,n as ct,ob as ht,qb as p,rb as F,sb as K,ta as m,tb as yt,w as dt,x as at}from"./chunk-PSAS3MOM.js";function J(e,t,n){let o=typeof e=="function"?{next:e,error:t,complete:n}:e;return c=>c.pipe(R({next:o.next,complete:o.complete}),at(s=>(o.error(s),st)),o.finalize?lt(o.finalize):s=>s)}var wt=Symbol("DEEP_SIGNAL");function It(e){return new Proxy(e,{has(t,n){return!!this.get(t,n,void 0)},get(t,n){let o=S(t);return!Ft(o)||!(n in o)?(b(t[n])&&t[n][wt]&&delete t[n],t[n]):(b(t[n])||(Object.defineProperty(t,n,{value:h(()=>t()[n]),configurable:!0}),t[n][wt]=!0),It(t[n]))}})}var Ot=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function Ft(e){if(e===null||typeof e!="object"||Kt(e))return!1;let t=Object.getPrototypeOf(e);if(t===Object.prototype)return!0;for(;t&&t!==Object.prototype;){if(Ot.includes(t.constructor))return!1;t=Object.getPrototypeOf(t)}return t===Object.prototype}function Kt(e){return typeof e?.[Symbol.iterator]=="function"}var Nt=new WeakMap,f=Symbol("STATE_SOURCE");function C(e,...t){let n=S(()=>Dt(e)),o=t.reduce((r,d)=>i(i({},r),typeof d=="function"?d(r):d),n),c=e[f],s=Reflect.ownKeys(e[f]);for(let r of Reflect.ownKeys(o))if(s.includes(r)){let d=r;n[d]!==o[d]&&c[d].set(o[d])}zt(e)}function Dt(e){let t=e[f];return Reflect.ownKeys(e[f]).reduce((n,o)=>{let c=t[o]();return g(i({},n),{[o]:c})},{})}function Wt(e){return Nt.get(e[f])||[]}function zt(e){let t=Wt(e);for(let n of t){let o=S(()=>Dt(e));n(o)}}function Et(...e){let t=[...e],n=typeof t[0]=="function"?{}:t.shift(),o=t;return(()=>{class s{constructor(){let d=o.reduce((T,At)=>At(T),Ht()),{stateSignals:x,props:D,methods:E,hooks:v}=d,k=i(i(i({},x),D),E);this[f]=d[f];for(let T of Reflect.ownKeys(k))this[T]=k[T];let{onInit:nt,onDestroy:ot}=v;nt&&nt(),ot&&u(M).onDestroy(ot)}static \u0275fac=function(x){return new(x||s)};static \u0275prov=A({token:s,factory:s.\u0275fac,providedIn:n.providedIn||null})}return s})()}function Ht(){return{[f]:{},stateSignals:{},props:{},methods:{},hooks:{}}}function X(e){return t=>{let n=e(i(i(i({[f]:t[f]},t.stateSignals),t.props),t.methods));return g(i({},t),{props:i(i({},t.props),n)})}}function Mt(e){return X(t=>{let n=e(t);return Reflect.ownKeys(n).reduce((c,s)=>{let r=n[s];return g(i({},c),{[s]:b(r)?r:h(r)})},{})})}function jt(e){return t=>{let n=e(i(i(i({[f]:t[f]},t.stateSignals),t.props),t.methods));return g(i({},t),{methods:i(i({},t.methods),n)})}}function Lt(e){return t=>{let n=typeof e=="function"?e():e,o=Reflect.ownKeys(n),c=t[f],s={};for(let r of o)c[r]=pt(n[r]),s[r]=It(c[r]);return g(i({},t),{stateSignals:i(i({},t.stateSignals),s)})}}function Z(e,t){let n=t?.injector??u(O),o=new it,c=e(o).subscribe();n.get(M).onDestroy(()=>c.unsubscribe());let s=(r,d)=>{if(Yt(r))return o.next(r),{destroy:rt};let x=Ut(),D=d?.injector??x??n;if(b(r)){let v=G(()=>{let k=r();S(()=>o.next(k))},{injector:D});return c.add({unsubscribe:()=>v.destroy()}),v}let E=r.subscribe(v=>o.next(v));return c.add(E),D!==n&&D.get(M).onDestroy(()=>E.unsubscribe()),{destroy:()=>E.unsubscribe()}};return s.destroy=c.unsubscribe.bind(c),s}function Yt(e){return!b(e)&&!ct(e)}function Ut(){try{return u(O)}catch{return}}var W=class e{#t=u(vt);fetchLiveProducrs(){return this.#t.get("product/allProducts")}static \u0275fac=function(n){return new(n||e)};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})};var z=Et({providedIn:"root"},Lt({_productsList:[],_productsListApiLoading:!1,_productsListError:null}),X(()=>({_productsService:u(W)})),jt(e=>({fetchAllLiveProducts:Z($(dt(()=>e._productsList().length<1),R(()=>C(e,t=>g(i({},t),{_productsListApiLoading:!0}))),B(()=>e._productsService.fetchLiveProducrs().pipe(J({next:t=>C(e,n=>g(i({},n),{_productsList:t,_productsListError:null})),error:t=>C(e,n=>g(i({},n),{_productsListError:t,_productsList:[]})),finalize:()=>C(e,t=>g(i({},t),{_productsListApiLoading:!1}))}))))),fetchProductById:Z($(B(t=>(console.log(t),e._productsService.fetchLiveProducrs().pipe(J({next:n=>{console.log(n)},error:n=>{console.log(n)}}))))))})),Mt(e=>({productsListC:h(()=>e._productsList()),productsListErrorC:h(()=>e._productsListError()),productsListApiLoading:h(()=>e._productsListApiLoading())})));var qt=Math.pow(10,8)*24*60*60*1e3,Pe=-qt;var _t=864e5;var $t=3600;var Pt=$t*24,Ce=Pt*7,Bt=Pt*365.2425,Gt=Bt/12,ke=Gt*3,Q=Symbol.for("constructDateFrom");function H(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&Q in e?e[Q](t):e instanceof Date?new e.constructor(t):new Date(t)}function Y(e,t){return H(t||e,e)}function tt(e){let t=Y(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Ct(e,...t){let n=H.bind(null,e||t.find(o=>typeof o=="object"));return t.map(n)}function et(e,t){let n=Y(e,t?.in);return n.setHours(0,0,0,0),n}function kt(e,t,n){let[o,c]=Ct(n?.in,e,t),s=et(o),r=et(c),d=+s-tt(s),x=+r-tt(r);return Math.round((d-x)/_t)}function Vt(e,t){if(e&1&&y(0,"div",23),e&2){let n=P();ht(`width: ${n.percent()}%`)}}var U=class e{#t=u(St);#e=u(z);product=bt.required();percent=h(()=>Math.round(this.product().ordersPlaced/this.product().ordersRequired*100));noOfDaysLeft=h(()=>this.#n(this.product().orderCutOffDate));#n(t){return kt(t,new Date)}navigateToProductDetails(t){this.#e.fetchProductById(t),this.#t.navigate([`product-details/${t}`])}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=w({type:e,selectors:[["bulkly-product"]],inputs:{product:[1,"product"]},decls:36,vars:9,consts:[[1,"flex","h-full","flex-col","overflow-hidden","rounded-3xl","border","border-slate-200","bg-white","shadow-sm","transition","hover:shadow-lg"],[1,"aspect-[4/3]","w-full","overflow-hidden","rounded-xl","group"],["src","https://images.unsplash.com/photo-1593069431672-f903a33c286f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxzdXN0YWluYWJsZSUyMGZ1cm5pdHVyZXxlbnwxfHx8fDE3NjE1MDI4MTd8MA&ixlib=rb-4.1.0&q=80&w=1080","alt","SmartAir Pro 5000 Air Purifier",1,"h-full","w-full","object-cover","transform","transition","duration-700","ease-out","group-hover:scale-105","group-hover:brightness-110"],[1,"flex","flex-1","flex-col","p-5"],[1,"text-sm","font-semibold","text-slate-900","md:text-base","hover:text-blue-600","transition"],[1,"mt-1","text-xs","text-slate-500","md:text-sm"],[1,"mt-4","space-y-2","text-xs","text-slate-600"],[1,"flex","items-center","justify-between"],[1,"h-1.5","w-full","rounded-full","bg-slate-100"],[1,"h-1.5","rounded-full","bg-blue-900",3,"style"],[1,"flex","items-center","justify-between","text-[11px]","md:text-xs"],[1,"mt-4","text-sm","md:text-base"],[1,"font-semibold","text-sky-700"],[1,"ml-2","text-xs","text-slate-400","line-through"],[1,"mt-4","flex","items-center","gap-3"],[1,"flex-1","rounded-full","bg-slate-900","py-2.5","text-center","text-xs","font-semibold","text-white","shadow-sm","hover:bg-black","md:text-sm",3,"click"],["aria-label","Share product",1,"flex","h-9","w-9","items-center","justify-center","rounded-full","border","border-slate-300","text-slate-600","hover:bg-slate-50"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","aria-hidden","true",1,"lucide","lucide-share2","lucide-share-2","h-4","w-4","mr-2"],["cx","18","cy","5","r","3"],["cx","6","cy","12","r","3"],["cx","18","cy","19","r","3"],["x1","8.59","x2","15.42","y1","13.51","y2","17.49"],["x1","15.41","x2","8.59","y1","6.51","y2","10.49"],[1,"h-1.5","rounded-full","bg-blue-900"]],template:function(n,o){if(n&1&&(a(0,"article",0)(1,"div",1),y(2,"img",2),l(),a(3,"div",3)(4,"h3",4),p(5),l(),a(6,"p",5),p(7),l(),a(8,"div",6)(9,"div",7)(10,"span"),p(11,"Orders"),l(),a(12,"span"),p(13),l()(),a(14,"div",8),j(15,Vt,1,2,"div",9),l(),a(16,"div",10)(17,"span"),p(18),l(),a(19,"span"),p(20),l()()(),a(21,"div",11)(22,"span",12),p(23),l(),a(24,"span",13),p(25),l()(),a(26,"div",14)(27,"button",15),xt("click",function(){return o.navigateToProductDetails(o.product().productId)}),p(28," View Details "),l(),a(29,"button",16),ut(),a(30,"svg",17),y(31,"circle",18)(32,"circle",19)(33,"circle",20)(34,"line",21)(35,"line",22),l()()()()()),n&2){let c,s,r,d,x;m(5),K("",(c=o.product())==null?null:c.name," "),m(2),F((s=o.product())==null?null:s.description),m(6),yt("",(r=o.product())==null?null:r.ordersPlaced,"/",(r=o.product())==null?null:r.ordersRequired),m(2),L(o.percent()?15:-1),m(3),K("-",o.noOfDaysLeft()," days left"),m(2),K("",o.percent(),"% funded"),m(3),F((d=o.product())==null?null:d.offerPrice),m(2),F((x=o.product())==null?null:x.actualPrice)}},encapsulation:2,changeDetection:0})};var q=class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=w({type:e,selectors:[["bulkly-product-card-loader"]],decls:8,vars:0,consts:[[1,"animate-pulse","rounded-3xl","border","border-slate-200","bg-white","shadow-sm","overflow-hidden","max-w-sm","mx-auto"],[1,"h-64","w-full","bg-slate-200"],[1,"p-5","md:p-6","space-y-4"],[1,"h-5","w-3/4","bg-slate-200","rounded"],[1,"h-4","w-1/2","bg-slate-200","rounded"],[1,"h-4","w-full","bg-slate-200","rounded"],[1,"mt-4"],[1,"h-12","w-full","bg-slate-200","rounded-2xl"]],template:function(n,o){n&1&&(a(0,"div",0),y(1,"div",1),a(2,"div",2),y(3,"div",3)(4,"div",4)(5,"div",5),a(6,"div",6),y(7,"div",7),l()()())},encapsulation:2,changeDetection:0})};var Jt=(e,t)=>t.productId;function Xt(e,t){e&1&&(_(0,"div",5),V(1,"bulkly-product-card-loader")(2,"bulkly-product-card-loader"),I())}function Zt(e,t){if(e&1&&V(0,"bulkly-product",6),e&2){let n=t.$implicit;gt("product",n)}}function Qt(e,t){if(e&1&&ft(0,Zt,1,1,"bulkly-product",6,Jt),e&2){let n=P(2);mt(n.productsList())}}function te(e,t){if(e&1&&(_(0,"div",5),j(1,Qt,2,0),I()),e&2){let n,o=P();m(),L(((n=o.productsList())==null?null:n.length)>0?1:-1)}}var Rt=class e{#t=u(z);productsList=this.#t.productsListC;productsListError=this.#t.productsListErrorC;productsListApiLoading=this.#t.productsListApiLoading;constructor(){this.#t.fetchAllLiveProducts()}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=w({type:e,selectors:[["bulkly-live-products"]],decls:9,vars:1,consts:[[1,"bg-white","py-12"],[1,"mx-auto","max-w-6xl","px-4"],[1,"flex","flex-col","gap-2"],[1,"text-xl","font-semibold","text-slate-900","md:text-2xl"],[1,"text-sm","text-slate-600","md:text-base"],[1,"mt-8","grid","gap-8","sm:grid-cols-2","lg:grid-cols-3"],[3,"product"]],template:function(n,o){n&1&&(_(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),p(4," Live Products "),I(),_(5,"p",4),p(6," These products are actively collecting orders. Join others to unlock better prices! "),I()(),j(7,Xt,3,0,"div",5)(8,te,2,1,"div",5),I()()),n&2&&(m(7),L(o.productsListApiLoading()?7:8))},dependencies:[U,q],encapsulation:2,changeDetection:0})};export{Rt as LiveProducts};
