import{d as ve}from"./chunk-3LJSDMCE.js";import{k as be}from"./chunk-LD4YGYD6.js";import{$a as fe,A as ce,Cb as x,E as N,G as ae,Gb as ye,Ha as E,J as P,Ma as y,N as d,U as de,V as j,X as w,Xa as L,Ya as _,_a as ue,a as c,ab as pe,b as h,bb as C,ca as le,cb as T,db as me,e as ne,ea as Y,eb as l,f as z,fa as v,fb as u,gb as k,h as oe,j as re,jb as ge,kb as R,n as ie,ob as he,qb as f,rb as O,sb as F,ta as m,tb as xe,x as se}from"./chunk-N4CCNA4O.js";function U(t,e,n){let o=typeof t=="function"?{next:t,error:e,complete:n}:t;return i=>i.pipe(ae({next:o.next,complete:o.complete}),se(s=>(o.error(s),re)),o.finalize?ce(o.finalize):s=>s)}var Se=Symbol("DEEP_SIGNAL");function Ie(t){return new Proxy(t,{has(e,n){return!!this.get(e,n,void 0)},get(e,n){let o=v(e);return!Oe(o)||!(n in o)?(y(e[n])&&e[n][Se]&&delete e[n],e[n]):(y(e[n])||(Object.defineProperty(e,n,{value:x(()=>e()[n]),configurable:!0}),e[n][Se]=!0),Ie(e[n]))}})}var Re=[WeakSet,WeakMap,Promise,Date,Error,RegExp,ArrayBuffer,DataView,Function];function Oe(t){if(t===null||typeof t!="object"||Fe(t))return!1;let e=Object.getPrototypeOf(t);if(e===Object.prototype)return!0;for(;e&&e!==Object.prototype;){if(Re.includes(e.constructor))return!1;e=Object.getPrototypeOf(e)}return e===Object.prototype}function Fe(t){return typeof t?.[Symbol.iterator]=="function"}var Ke=new WeakMap,p=Symbol("STATE_SOURCE");function B(t,...e){let n=v(()=>we(t)),o=e.reduce((r,a)=>c(c({},r),typeof a=="function"?a(r):a),n),i=t[p],s=Reflect.ownKeys(t[p]);for(let r of Reflect.ownKeys(o))if(s.includes(r)){let a=r;n[a]!==o[a]&&i[a].set(o[a])}We(t)}function we(t){let e=t[p];return Reflect.ownKeys(t[p]).reduce((n,o)=>{let i=e[o]();return h(c({},n),{[o]:i})},{})}function Ae(t){return Ke.get(t[p])||[]}function We(t){let e=Ae(t);for(let n of e){let o=v(()=>we(t));n(o)}}function De(...t){let e=[...t],n=typeof e[0]=="function"?{}:e.shift(),o=e;return(()=>{class s{constructor(){let a=o.reduce((M,ke)=>ke(M),He()),{stateSignals:g,props:S,methods:I,hooks:b}=a,D=c(c(c({},g),S),I);this[p]=a[p];for(let M of Reflect.ownKeys(D))this[M]=D[M];let{onInit:ee,onDestroy:te}=b;ee&&ee(),te&&d(w).onDestroy(te)}static \u0275fac=function(g){return new(g||s)};static \u0275prov=P({token:s,factory:s.\u0275fac,providedIn:n.providedIn||null})}return s})()}function He(){return{[p]:{},stateSignals:{},props:{},methods:{},hooks:{}}}function G(t){return e=>{let n=t(c(c(c({[p]:e[p]},e.stateSignals),e.props),e.methods));return h(c({},e),{props:c(c({},e.props),n)})}}function Me(t){return G(e=>{let n=t(e);return Reflect.ownKeys(n).reduce((i,s)=>{let r=n[s];return h(c({},i),{[s]:y(r)?r:x(r)})},{})})}function Pe(t){return e=>{let n=t(c(c(c({[p]:e[p]},e.stateSignals),e.props),e.methods));return h(c({},e),{methods:c(c({},e.methods),n)})}}function je(t){return e=>{let n=typeof t=="function"?t():t,o=Reflect.ownKeys(n),i=e[p],s={};for(let r of o)i[r]=le(n[r]),s[r]=Ie(i[r]);return h(c({},e),{stateSignals:c(c({},e.stateSignals),s)})}}function V(t,e){let n=e?.injector??d(j),o=new oe,i=t(o).subscribe();n.get(w).onDestroy(()=>i.unsubscribe());let s=(r,a)=>{if(qe(r))return o.next(r),{destroy:ne};let g=ze(),S=a?.injector??g??n;if(y(r)){let b=Y(()=>{let D=r();v(()=>o.next(D))},{injector:S});return i.add({unsubscribe:()=>b.destroy()}),b}let I=r.subscribe(b=>o.next(b));return i.add(I),S!==n&&S.get(w).onDestroy(()=>I.unsubscribe()),{destroy:()=>I.unsubscribe()}};return s.destroy=i.unsubscribe.bind(i),s}function qe(t){return!y(t)&&!ie(t)}function ze(){try{return d(j)}catch{return}}var J=[{actualPrice:12999,description:"Medical-grade HEPA filtration with AI-powered air quality monitoring",name:"SmartAir Pro 5000 Air Purifier",offerPrice:799,orderCutOffDate:"2025-12-24T10:15:30",ordersPlaced:324,ordersRequired:1e3,productId:1,productLiveTime:"2025-12-05T10:15:30",productMediaData:{gif:null,images:[],logo:null,videos:[]}},{actualPrice:27850,description:"Handcrafted 6-seater dining table from 100% reclaimed teak",name:"Reclaimed Wood Dining Table",offerPrice:18999,orderCutOffDate:"2026-06-30T10:15:30",ordersPlaced:700,ordersRequired:1e3,productId:2,productLiveTime:"2025-12-05T10:15:30",productMediaData:{gif:null,images:[],logo:null,videos:[]}},{actualPrice:63500,description:"Premium full-grain leather messenger bag with lifetime warranty",name:"Heritage Leather Laptop Bag",offerPrice:45999,ordersPlaced:100,orderCutOffDate:"2026-06-30T10:15:30",ordersRequired:1e3,productId:3,productLiveTime:"2025-12-05T10:15:30",productMediaData:{gif:null,images:[],logo:null,videos:[]}},{actualPrice:16500,description:"Floating shelves in reclaimed oak with hidden mounting",name:"Minimalist Wall Shelf Set",offerPrice:9999,orderCutOffDate:"2026-06-29T10:15:30",ordersPlaced:900,ordersRequired:1e3,productId:4,productLiveTime:"2025-12-05T10:15:30",productMediaData:{gif:null,images:[],logo:null,videos:[]}}];var K=class t{#e=d(be);fetchLiveProducrs(){return this.#e.get("product/allProducts")}static \u0275fac=function(n){return new(n||t)};static \u0275prov=P({token:t,factory:t.\u0275fac,providedIn:"root"})};var A=De({providedIn:"root"},je({_productsList:J,_productsListError:null}),G(()=>({_productsService:d(K)})),Pe(t=>({fetchAllLiveProducts:V(z(N(()=>t._productsService.fetchLiveProducrs().pipe(U({next:e=>{B(t,n=>h(c({},n),{_productsList:e,_productsListError:null}))},error:e=>{B(t,n=>h(c({},n),{_productsListError:e,_productsList:J}))}}))))),fetchProductById:V(z(N(e=>(console.log(e),t._productsService.fetchLiveProducrs().pipe(U({next:n=>{console.log(n)},error:n=>{console.log(n)}}))))))})),Me(t=>({productsListC:x(()=>t._productsList()),productsListErrorC:x(()=>t._productsListError())})));var Ne=Math.pow(10,8)*24*60*60*1e3,Lt=-Ne;var Ee=864e5;var Ye=3600;var Le=Ye*24,_t=Le*7,Ue=Le*365.2425,$e=Ue/12,Ct=$e*3,X=Symbol.for("constructDateFrom");function W(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&X in t?t[X](e):t instanceof Date?new t.constructor(e):new Date(e)}function H(t,e){return W(e||t,t)}function Z(t){let e=H(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function _e(t,...e){let n=W.bind(null,t||e.find(o=>typeof o=="object"));return e.map(n)}function Q(t,e){let n=H(t,e?.in);return n.setHours(0,0,0,0),n}function Ce(t,e,n){let[o,i]=_e(n?.in,t,e),s=Q(o),r=Q(i),a=+s-Z(s),g=+r-Z(r);return Math.round((a-g)/Ee)}function Ge(t,e){if(t&1&&k(0,"div",23),t&2){let n=R();he(`width: ${n.percent()}%`)}}var q=class t{#e=d(ve);#t=d(A);product=ye.required();percent=x(()=>Math.round(this.product().ordersPlaced/this.product().ordersRequired*100));noOfDaysLeft=x(()=>this.#n(this.product().orderCutOffDate));#n(e){return Ce(e,new Date)}navigateToProductDetails(e){this.#t.fetchProductById(e),this.#e.navigate([`product-details/${e}`])}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=E({type:t,selectors:[["bulkly-product"]],inputs:{product:[1,"product"]},decls:36,vars:9,consts:[[1,"flex","h-full","flex-col","overflow-hidden","rounded-3xl","border","border-slate-200","bg-white","shadow-sm","transition","hover:shadow-lg"],[1,"aspect-[4/3]","w-full","overflow-hidden","rounded-xl","group"],["src","https://images.unsplash.com/photo-1593069431672-f903a33c286f?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxzdXN0YWluYWJsZSUyMGZ1cm5pdHVyZXxlbnwxfHx8fDE3NjE1MDI4MTd8MA&ixlib=rb-4.1.0&q=80&w=1080","alt","SmartAir Pro 5000 Air Purifier",1,"h-full","w-full","object-cover","transform","transition","duration-700","ease-out","group-hover:scale-105","group-hover:brightness-110"],[1,"flex","flex-1","flex-col","p-5"],[1,"text-sm","font-semibold","text-slate-900","md:text-base","hover:text-blue-600","transition"],[1,"mt-1","text-xs","text-slate-500","md:text-sm"],[1,"mt-4","space-y-2","text-xs","text-slate-600"],[1,"flex","items-center","justify-between"],[1,"h-1.5","w-full","rounded-full","bg-slate-100"],[1,"h-1.5","rounded-full","bg-slate-900",3,"style"],[1,"flex","items-center","justify-between","text-[11px]","md:text-xs"],[1,"mt-4","text-sm","md:text-base"],[1,"font-semibold","text-sky-700"],[1,"ml-2","text-xs","text-slate-400","line-through"],[1,"mt-4","flex","items-center","gap-3"],[1,"flex-1","rounded-full","bg-slate-900","py-2.5","text-center","text-xs","font-semibold","text-white","shadow-sm","hover:bg-black","md:text-sm",3,"click"],["aria-label","Share product",1,"flex","h-9","w-9","items-center","justify-center","rounded-full","border","border-slate-200","text-slate-600","hover:bg-slate-50"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round","aria-hidden","true",1,"lucide","lucide-share2","lucide-share-2","h-4","w-4","mr-2"],["cx","18","cy","5","r","3"],["cx","6","cy","12","r","3"],["cx","18","cy","19","r","3"],["x1","8.59","x2","15.42","y1","13.51","y2","17.49"],["x1","15.41","x2","8.59","y1","6.51","y2","10.49"],[1,"h-1.5","rounded-full","bg-slate-900"]],template:function(n,o){if(n&1&&(l(0,"article",0)(1,"div",1),k(2,"img",2),u(),l(3,"div",3)(4,"h3",4),f(5),u(),l(6,"p",5),f(7),u(),l(8,"div",6)(9,"div",7)(10,"span"),f(11,"Orders"),u(),l(12,"span"),f(13),u()(),l(14,"div",8),L(15,Ge,1,2,"div",9),u(),l(16,"div",10)(17,"span"),f(18),u(),l(19,"span"),f(20),u()()(),l(21,"div",11)(22,"span",12),f(23),u(),l(24,"span",13),f(25),u()(),l(26,"div",14)(27,"button",15),ge("click",function(){return o.navigateToProductDetails(o.product().productId)}),f(28," View Details "),u(),l(29,"button",16),de(),l(30,"svg",17),k(31,"circle",18)(32,"circle",19)(33,"circle",20)(34,"line",21)(35,"line",22),u()()()()()),n&2){let i,s,r,a,g;m(5),F("",(i=o.product())==null?null:i.name," "),m(2),O((s=o.product())==null?null:s.description),m(6),xe("",(r=o.product())==null?null:r.ordersPlaced,"/",(r=o.product())==null?null:r.ordersRequired),m(2),_(o.percent()?15:-1),m(3),F("-",o.noOfDaysLeft()," days left"),m(2),F("",o.percent(),"% funded"),m(3),O((a=o.product())==null?null:a.offerPrice),m(2),O((g=o.product())==null?null:g.actualPrice)}},encapsulation:2,changeDetection:0})};var Ve=(t,e)=>e.productId;function Je(t,e){if(t&1&&me(0,"bulkly-product",6),t&2){let n=e.$implicit;pe("product",n)}}function Xe(t,e){if(t&1&&ue(0,Je,1,1,"bulkly-product",6,Ve),t&2){let n=R();fe(n.productsList())}}var Te=class t{#e=d(A);productsList=this.#e.productsListC;productsListError=this.#e.productsListErrorC;constructor(){this.#e.fetchAllLiveProducts()}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=E({type:t,selectors:[["bulkly-live-products"]],decls:9,vars:1,consts:[[1,"bg-white","py-12"],[1,"mx-auto","max-w-6xl","px-4"],[1,"flex","flex-col","gap-2"],[1,"text-xl","font-semibold","text-slate-900","md:text-2xl"],[1,"text-sm","text-slate-600","md:text-base"],[1,"mt-8","grid","gap-8","sm:grid-cols-2","lg:grid-cols-3"],[3,"product"]],template:function(n,o){if(n&1&&(C(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3),f(4," Live Products "),T(),C(5,"p",4),f(6," These products are actively collecting orders. Join others to unlock better prices! "),T()(),C(7,"div",5),L(8,Xe,2,0),T()()()),n&2){let i;m(8),_(((i=o.productsList())==null?null:i.length)>0?8:-1)}},dependencies:[q],encapsulation:2,changeDetection:0})};export{Te as LiveProducts};
